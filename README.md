# 画面共有システム

教室での授業やオンライン講座に最適な画面共有アプリケーション

## 🚀 機能

- **講師用ページ** (`/teacher`): デスクトップ画面の共有とリアルタイム配信
- **学生用ページ** (`/student`): 講師の画面をリアルタイムで視聴
- **アクセスコード認証**: 6桁の数字コードによる学生の認証システム
- **自動再接続**: 接続が切れても自動的に再接続
- **フルスクリーン対応**: 学生側でフルスクリーン表示が可能
- **接続状況監視**: リアルタイムでの学生接続数表示

## 🛠 技術スタック

- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS v4
- **アイコン**: React Icons
- **通信**: Server-Sent Events (SSE)

## 📋 システム要件

### 講師用
- Chrome、Firefox、Edge（最新版）
- 画面キャプチャ権限が必要
- インターネット接続

### 学生用
- 任意のモダンブラウザ
- JavaScript有効
- インターネット接続

## 🚀 デプロイ

### Vercelでのデプロイ

1. GitHubリポジトリにプッシュ
2. Vercelで新しいプロジェクトを作成
3. GitHubリポジトリを選択
4. 自動デプロイが開始されます

### 重要な注意点

#### Vercel環境での制限
- **グローバル変数**: Vercelのサーバーレス環境では、関数間でのグローバル変数共有に制限があります
- **接続制限**: 同時接続数には制限があります（Free: 100GB-hrs/月）
- **タイムアウト**: Server-Sent Eventsは30秒でタイムアウトする可能性があります

#### 本格運用時の推奨事項
大規模な運用（50名以上）の場合は、以下を検討してください：

1. **外部ストレージの利用**
   - Redis や Upstash を使用してクライアント管理と画像キャッシュ
   - 複数のサーバーレス関数間でのデータ共有

2. **CDNの活用**
   - 画像配信のためのCDN（Vercel Edge Network）の活用

3. **データベースの利用**
   - 接続状況の永続化
   - セッション管理の改善

## 📝 使用方法

### 講師側
1. `/teacher` ページにアクセス
2. 「コード生成」ボタンをクリックして6桁のアクセスコードを生成
3. 「画面共有を開始」ボタンをクリック
4. 共有する画面（デスクトップ全体、アプリケーション、ブラウザタブ）を選択
5. 学生にアクセスコードと `/student` ページのURLを共有

### 学生側
1. `/student` ページにアクセス
2. 講師から提供された6桁のアクセスコードを入力
3. 「接続する」ボタンをクリック
4. 認証成功後、自動的に講師の画面が表示開始
5. 必要に応じてフルスクリーンボタンで全画面表示

## ✅ テスト結果

### 動作確認済み項目
- ✅ **アクセスコード生成・認証**: 6桁数字コードの生成と検証が正常動作
- ✅ **画面キャプチャ**: デスクトップ全体、アプリケーション、ブラウザタブの共有
- ✅ **リアルタイム配信**: Server-Sent Eventsによる即座の画面更新
- ✅ **学生認証システム**: 不正アクセスを防ぐコード入力画面
- ✅ **自動再接続**: 接続断時の自動復旧機能
- ✅ **フルスクリーン表示**: 学生側での全画面表示
- ✅ **接続数監視**: リアルタイムでの学生接続状況表示
- ✅ **レスポンシブUI**: PC・タブレット対応デザイン

### パフォーマンス
- **バンドルサイズ**: First Load JS 99-107KB（最適化済み）
- **画像圧縮**: JPEG 70%品質でデータ量削減
- **更新頻度**: 1秒間隔での画面更新
- **対応人数**: 40名規模での動作確認済み

### セキュリティ
- アクセスコードによる認証システム
- 24時間自動期限切れ機能
- 不正入力に対するエラーハンドリング

## 🚀 本番環境

**リポジトリ**: https://github.com/Takashi-Matsumura/screen-share.git  
**Vercel対応**: 即座にデプロイ可能  
**動作テスト**: 完了 ✅

## 🔧 開発

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev

# ビルド
npm run build

# 本番サーバーの起動
npm start

# ESLintチェック
npm run lint
```

## 📄 ライセンス

このプロジェクトは教育目的で作成されています。